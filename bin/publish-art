#!/bin/bash
 
declare ARTIFACTORYUSER=svc_cyclonebuild
declare ARTIFACTORYPASSWORD=AP3NTbQYjxrPAiau4ABRiWcFiy4cAqxseJKimx
 
function uploadFile()
{
    local -r target="${1:?}"
 
    local file="$(basename "$target")"
 
    #local md5Value="$(md5sum "$file")"
    local md5Value="$(md5 -q "$file")"
    md5Value="${md5Value:0:32}"
    #local sha1Value="$(sha1sum "$file")"
    local sha1Value="$(shasum "$file")"
    sha1Value="${sha1Value:0:40}"
   
    local -r
    url="https://afeoscyc-mw.cec.lab.emc.com/artifactory/cyclone-devops-mw/$target"
   
    echo "INFO: Uploading $file to $url"
    curl -k -X PUT -u $ARTIFACTORYUSER:$ARTIFACTORYPASSWORD \
         -H "X-Checksum-Md5: $md5Value" \
        -H "X-Checksum-Sha1: $sha1Value" \
         -T "$file" \
         $url
}
 
 
uploadFile 'libs/jvm/uS-lib-v0.0-2-g7fbe551.jar'

# To retrieve manually:
#     curl -u hendrr2 https://afeoscyc-mw.cec.lab.emc.com/artifactory/cyclone-devops-mw/libs/jvm/uS-lib-v0.0-2-g7fbe551.jar -o nep.jar
#        OR
#     curl -u hendrr2:password https://afeoscyc-mw.cec.lab.emc.com/artifactory/cyclone-devops-mw/libs/jvm/uS-lib-v0.0-2-g7fbe551.jar -o nep.jar
